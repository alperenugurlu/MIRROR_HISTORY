<div align="center">

```
 ███╗   ███╗██╗██████╗ ██████╗  ██████╗ ██████╗
 ████╗ ████║██║██╔══██╗██╔══██╗██╔═══██╗██╔══██╗
 ██╔████╔██║██║██████╔╝██████╔╝██║   ██║██████╔╝
 ██║╚██╔╝██║██║██╔══██╗██╔══██╗██║   ██║██╔══██╗
 ██║ ╚═╝ ██║██║██║  ██║██║  ██║╚██████╔╝██║  ██║
 ╚═╝     ╚═╝╚═╝╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝ ╚═╝  ╚═╝
          H I S T O R Y
```
</div>


<img width="1100" height="350" alt="image" src="https://github.com/user-attachments/assets/1ce38123-bf21-4ff1-b083-c2b19472f491" />



**Your entire history of you. Recorded. Analyzed. Confronted.**

*What if there was a grain implanted behind your ear that recorded everything you did, everything you saw? What if you could replay any moment of your life and have an AI tell you the uncomfortable truth about who you really are?*

[![TypeScript](https://img.shields.io/badge/TypeScript-5.3-blue?logo=typescript&logoColor=white)](https://www.typescriptlang.org/)
[![React](https://img.shields.io/badge/React-18.2-61DAFB?logo=react&logoColor=black)](https://react.dev/)
[![Electron](https://img.shields.io/badge/Electron-28-47848F?logo=electron&logoColor=white)](https://www.electronjs.org/)
[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?logo=docker&logoColor=white)](https://www.docker.com/)
[![SQLite](https://img.shields.io/badge/SQLite-Local_Only-003B57?logo=sqlite&logoColor=white)](https://www.sqlite.org/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

[Interactive Demo](#-interactive-demo) &bull; [Features](#-the-grain-sees-everything) &bull; [Install](#-installation) &bull; [Why Free?](#-why-is-this-free) &bull; [Architecture](#-architecture) &bull; [Telegram Bot](#-telegram-relay)

</div>

---

## Interactive Demo

> *See the grain in action. No install required.*

<div align="center">

<a href="https://demo.arcade.software/yW6jzMajkrfWdwNJYEmX?embed&show_copy_link=true" target="_blank">
  <img src="https://img.shields.io/badge/%E2%96%B6%EF%B8%8F_INTERACTIVE_DEMO-Watch_the_Grain_Analyze_Financial_Data-0d1117?style=for-the-badge&logo=data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iIzIyZDNlZSI+PHBhdGggZD0iTTggNXYxNGwxMS03eiIvPjwvc3ZnPg==&logoColor=22d3ee" alt="Interactive Demo" height="48" />
</a>

**[Click to launch interactive walkthrough &rarr;](https://demo.arcade.software/yW6jzMajkrfWdwNJYEmX?embed&show_copy_link=true)**

*Compare this week's and last week's financial data &mdash; watch the grain detect patterns in real time.*

</div>

---

## The Premise

> *"Your entire history of you."*
> &mdash; Black Mirror, S01E03

In the show, a grain implant records everything. People replay dinners to catch lies. Relationships end because the evidence is always there.

**Mirror History is that grain &mdash; but real.**

It ingests your financial transactions, calendar, location history, health data, photos, voice memos, and mood recordings. It stores everything locally on your machine. Then it uses AI to find the things you'd rather not see:

- The spending spike that correlates with your lowest mood week
- The person who disappeared from your photos between two periods
- The contradiction between your calendar ("gym at 7am") and your location data ("home until 11am")
- The pattern you've been performing happiness while your biometrics say otherwise

**The grain doesn't judge. It just remembers. And it never lies.**

---

## Why Is This Free?

Because surveillance tools shouldn't only exist for corporations.

Every tech company already has your data. Google knows where you've been. Your bank knows what you bought. Apple Health knows your heart rate at 3am. But *you* don't have a unified view of your own life &mdash; and *you* certainly don't have AI analyzing it for patterns.

Mirror History gives you the same power over your own data:

- **100% local** &mdash; SQLite database on your machine. Zero cloud. Zero telemetry.
- **You own your grain** &mdash; Export everything as JSON. Delete everything with Panic Wipe.
- **AI is optional** &mdash; Works without API keys. Add Anthropic/OpenAI for the full Black Mirror experience.
- **Open source** &mdash; Read every line. Trust nothing. Verify everything. That's the grain's philosophy too.

---

## The Grain Sees Everything

### `CORTEX` &mdash; The Dashboard

The first thing you see. Today's memories, your neural state (mood), a tension meter showing how many contradictions the grain has found, and a setup checklist that won't let you ignore it.

*"The grain is always watching. It noticed you haven't configured the Oracle yet."*

### `RECALL` &mdash; Memory Timeline

Every recorded event on a cinematic timeline. Filter by type (financial, voice, location, health, mood, decisions). Expand any day. Forensic-zoom into any event.

*"1,593 memories recorded. 2025-08-01 through 2026-02-27. The grain forgets nothing."*

### `LEDGER` &mdash; Financial Memory Ledger

Money Diff &mdash; see exactly what changed in your spending, week over week. The grain detects anomalies, subscription creep, emotional spending patterns.

*"During your lowest-mood week, food delivery spending increased 180%."*

### `ORACLE` &mdash; AI Interrogation

Chat with Claude about your own life. Ask "what did I spend on food last month?" or "find contradictions in my behavior this week." The Oracle queries your memory database and responds in the grain's voice.

*"You keep asking about that week. Are you looking for answers, or confirmation?"*

### `RE-DO` &mdash; Time Machine

Replay any day, hour by hour. Watch your life unfold at 0.5x, 1x, 2x, or 4x speed. See what happened at 14:00 on any Tuesday. The grain fills silence with confrontational observations.

*"23 of 24 hours are silent. The grain was watching. You weren't recording."*

### `SCAN` &mdash; Dark Dashboard

Everything the grain found. Contradictions between your data sources. Uncomfortable truths generated by AI. Financial anomalies. Severity-ranked from CALM to CRITICAL.

*"Tension: CRITICAL. 6 contradictions. 5 truths. The grain always has more."*

### `COMPARE` &mdash; Before & After

Select two time periods. The grain measures the distance between who you were and who you became. Mood shifts, spending changes, location patterns, visual memory analysis with psychological forensics.

*"A person appearing in 4 of 6 Period 1 frames is entirely absent from Period 2. The grain notices."*

### `INGEST` &mdash; Memory Absorption

Feed the grain. Import from 6 data sources:

| Source | Format | What It Captures |
|--------|--------|------------------|
| **Financial** | CSV | Transactions, merchants, amounts, categories |
| **Location** | Google Takeout JSON | GPS coordinates, timestamps, addresses |
| **Calendar** | .ics (iCal) | Events, meetings, plans vs. reality |
| **Health** | Apple Health XML | Steps, sleep, heart rate, workouts |
| **Photos** | jpg/png/heic | Visual memories, face detection, mood analysis |
| **Videos** | mp4/mov/webm | Frame extraction, scene analysis |

### `FILTERS` &mdash; Data Control

Create rules to suppress noise. Ignore transactions below $5. Whitelist known subscriptions. Suppress specific merchants. You control what the grain watches.

### `CHRONICLE` &mdash; Immutable Audit Log

Every operation the system performs is logged forever. Every scan, every import, every AI query. The grain audits itself.

### `NEURAL` &mdash; Configuration

Configure everything: Anthropic API key (Oracle), OpenAI API key (semantic search & voice transcription), Telegram bot, Google Calendar connector, data retention policy, privacy level.

### `TELEGRAM` &mdash; Always-On Relay

Connect a Telegram bot and the grain follows you everywhere:

```
/note Had coffee with Alex, they seemed off
/mood 3 exhausted but productive
/thought I should really call my parents more
/ask What patterns do you see in my spending?
/weekly Generate my weekly digest

Voice messages → Auto-transcribed and stored
Photos → Saved with captions and analyzed
Location → Reverse geocoded and recorded
```

Scheduled nudges at 10am, 7pm (mood check) and 10pm (daily summary).

---

## Quick Start

### Option 1: Docker (Recommended)

```bash
git clone https://github.com/alperenugurlu/mirror-history.git
cd mirror-history
docker-compose up
```

Open **http://localhost:31072** &mdash; login with `admin` / `changeme`

### Option 2: Node.js

```bash
git clone https://github.com/alperenugurlu/mirror-history.git
cd mirror-history
npm install
npm run build:renderer
npm run build:server
npm start
```

Open **http://localhost:31072** &mdash; login with `admin` / `changeme`

### Option 3: Demo Mode (Pre-loaded Data)

```bash
npm run demo
```

Starts with 6 months of realistic Istanbul-based demo data. 1,593 memories. Financial transactions, calendar events, mood recordings, location history, inconsistencies, confrontations &mdash; everything.

### Option 4: Electron Desktop App

```bash
npm install
npm run dev
```

Full desktop experience with native file dialogs and system integration.

---

## Installation

### Prerequisites

- **Node.js 20+**
- **npm**
- **ffmpeg** (optional, for video frame extraction)

### Step by Step

```bash
# Clone
git clone https://github.com/alperenugurlu/mirror-history.git
cd mirror-history

# Install dependencies
npm install

# Build frontend
npm run build:renderer

# Build server
npm run build:server

# Start
npm start
```

### First Login

1. Open **http://localhost:31072**
2. Login: `admin` / `changeme`
3. You'll be prompted to **change your password** (required)
4. Import your first CSV (financial transactions)
5. The grain awakens

### Configure AI (Optional but Recommended)

Go to **Neural** and add your API keys:

| Key | What It Powers | Where to Get |
|-----|---------------|-------------|
| **Anthropic API Key** | Oracle chat, digests, confrontations, inconsistency detection | [console.anthropic.com](https://console.anthropic.com/) |
| **OpenAI API Key** | Semantic memory search, voice transcription (Whisper) | [platform.openai.com](https://platform.openai.com/) |

Without API keys, Mirror History works as a powerful data aggregator and financial analyzer. With API keys, the grain truly wakes up.

### Environment Variables

```bash
MIRROR_HISTORY_PORT=31072          # Server port
MIRROR_HISTORY_HOST=0.0.0.0       # Bind address
MIRROR_HISTORY_DB_PATH=./data.db  # Database location
MIRROR_HISTORY_JWT_SECRET=...     # Auto-generated if not set
```

---

## Architecture

```
┌─────────────────────────────────────────────────────┐
│                    MIRROR HISTORY                     │
├──────────────┬──────────────────┬───────────────────┤
│   ELECTRON   │   STANDALONE     │     DOCKER        │
│   Desktop    │   Node.js        │     Container     │
├──────────────┴──────────────────┴───────────────────┤
│                                                      │
│   ┌──────────────────────────────────────────────┐  │
│   │              React Frontend                   │  │
│   │  Cortex · Recall · Ledger · Oracle · Scan    │  │
│   │  Compare · Re-Do · Ingest · Filters          │  │
│   │  Chronicle · Neural · Telegram Config        │  │
│   │                                               │  │
│   │  Tailwind CSS · Monospace UI · CRT Scanlines │  │
│   └──────────────┬───────────────────────────────┘  │
│                  │ HTTP / IPC                        │
│   ┌──────────────▼───────────────────────────────┐  │
│   │              Fastify Server                   │  │
│   │  Auth (JWT + bcrypt) · Rate Limiting          │  │
│   │  Helmet · CORS · SSE · Static Files          │  │
│   └──────────────┬───────────────────────────────┘  │
│                  │                                   │
│   ┌──────────────▼───────────────────────────────┐  │
│   │           Core Services                       │  │
│   │  Money Diff · Confrontation Engine            │  │
│   │  Inconsistency Detector · Digest Generator    │  │
│   │  Visual Comparison · Semantic Search          │  │
│   │  Telegram Bot (Grammy) · Event Bus            │  │
│   └──────────────┬───────────────────────────────┘  │
│                  │                                   │
│   ┌──────────────▼───────────────────────────────┐  │
│   │           SQLite (better-sqlite3)             │  │
│   │  ~/.mirror-history/mirror-history.db          │  │
│   │  100% Local · Zero Cloud · Your Data Only     │  │
│   └──────────────────────────────────────────────┘  │
│                                                      │
│   External (Optional):                               │
│   ┌──────────┐ ┌──────────┐ ┌──────────────────┐   │
│   │ Anthropic│ │  OpenAI  │ │ Telegram Bot API │   │
│   │  Claude  │ │Embeddings│ │  Grammy SDK      │   │
│   └──────────┘ └──────────┘ └──────────────────┘   │
└─────────────────────────────────────────────────────┘
```

### Tech Stack

| Layer | Technology |
|-------|-----------|
| **Frontend** | React 18, TypeScript, Vite, Tailwind CSS |
| **Backend** | Fastify, Node.js 20, better-sqlite3 |
| **Desktop** | Electron 28 |
| **AI** | Anthropic Claude SDK, OpenAI (embeddings + Whisper) |
| **Bot** | Grammy (Telegram) |
| **Data** | PapaParse (CSV), ical.js (calendar), fast-xml-parser (health) |
| **Media** | fluent-ffmpeg (video frames) |
| **Auth** | JWT + bcrypt |
| **Deploy** | Docker (multi-stage, Alpine) |

---

## Telegram Relay

Turn any Telegram chat into a life recording device.

### Setup

1. Message [@BotFather](https://t.me/botfather) on Telegram &rarr; `/newbot`
2. Copy the bot token
3. Go to **Neural** in Mirror History &rarr; paste token
4. Send `/start` to your bot &rarr; copy the chat ID
5. Enter chat ID in Neural
6. The grain now listens on Telegram

### Commands

| Command | What It Does |
|---------|-------------|
| `/note <text>` | Save a quick note |
| `/thought <text>` | Record a thought |
| `/decision <text>` | Log a decision |
| `/remember <query>` | Search memories |
| `/ask <question>` | Ask AI about your life |
| `/mood <1-5> [note]` | Record neural state |
| `/weekly` | Generate weekly digest |
| `/diff` | Monthly spending scan |
| `/status` | System health check |

### Auto-Capture

| Input | Behavior |
|-------|---------|
| Voice message | Transcribed with Whisper, stored as memory |
| Photo | Saved, captioned, analyzed |
| Location | Reverse geocoded, stored |
| Plain text | Auto-saved as note |

### Scheduled

- **10:00 AM** &mdash; "How are you feeling? Reply with /mood 1-5"
- **7:00 PM** &mdash; Evening mood check
- **10:00 PM** &mdash; Auto-generated daily summary

---

## Privacy & Security

| Principle | Implementation |
|-----------|---------------|
| **Local-only storage** | SQLite at `~/.mirror-history/`. Never leaves your machine. |
| **No telemetry** | Zero analytics. Zero tracking. Zero cloud sync. |
| **You own your data** | Full JSON export anytime. Panic Wipe deletes everything. |
| **AI is opt-in** | Works without API keys. AI calls only when you configure them. |
| **Auth required** | JWT + bcrypt. Password change forced on first login. |
| **Rate limited** | Fastify rate-limit prevents brute force. |
| **Security headers** | Helmet middleware for HTTP hardening. |
| **Privacy levels** | "Balanced" (full context to AI) or "Strict" (minimal data sent). |
| **Retention policy** | Auto-delete data after 30d, 90d, 1y, or keep forever. |
| **Non-root Docker** | Runs as unprivileged `lifeos` user in container. |

**AI Data Flow:** When you use Oracle (chat) or run a Deep Scan, relevant context from your local database is sent to the Anthropic/OpenAI API for processing. Responses are stored locally. No data is stored on AI provider servers beyond their standard API retention policies. You can set privacy level to "Strict" to minimize context sent.

---

## Use Cases

### Personal Finance Awareness
Import your bank CSV and let the grain show you what you're really spending. Weekly diffs reveal patterns you didn't notice: the subscription creep, the emotional spending, the "small" purchases that add up.

### Life Journaling with AI Accountability
Use Telegram to record notes, thoughts, and moods throughout the day. The grain connects dots across data sources and calls out contradictions.

### Behavioral Pattern Detection
Import location + calendar + mood data. The grain detects when your self-reported mood doesn't match your behavioral patterns. It finds the days you said you were fine but your data says otherwise.

### Relationship to Time
Use Re-Do to replay specific days. See exactly what happened, hour by hour. The grain fills silent hours with observations: *"14 hours unrecorded. What were you avoiding?"*

### Period-Over-Period Self-Analysis
Compare any two time periods across every metric: mood, spending, locations visited, people in photos, health data. The grain measures the distance between who you were and who you became.

---

## Development

```bash
# Dev mode (Electron + hot reload)
npm run dev

# Dev mode (web only)
npm run dev:renderer

# Run tests
npm test

# Type check
npx tsc --noEmit

# Seed demo data
npm run seed:demo
```

### Project Structure

```
mirror-history/
├── src/                 # React frontend
│   ├── pages/           # 14 feature pages
│   ├── components/      # Reusable UI (40+ components)
│   ├── hooks/           # useApi, useSetupStatus
│   └── contexts/        # Auth, GrainVoice
├── server/              # Fastify API
│   ├── api.ts           # All routes
│   ├── auth.ts          # JWT middleware
│   ├── telegram.ts      # Bot integration
│   └── standalone.ts    # Entry point
├── core/                # Business logic
│   ├── database.ts      # SQLite schema
│   └── services/        # Data processors
├── electron/            # Desktop wrapper
├── shared/              # TypeScript types
├── scripts/             # Demo seeder
├── Dockerfile           # Multi-stage build
└── docker-compose.yml   # One-command deploy
```

---

## Roadmap

- [ ] Google Photos connector (auto-import visual memories)
- [ ] Spotify/Apple Music integration (mood-music correlation)
- [ ] Screen time data import
- [ ] Multi-user support (family grain)
- [ ] Mobile app (React Native)
- [ ] End-to-end encryption for database
- [ ] Plugin system for custom data sources
- [ ] Grain API for third-party integrations

---

## Contributing

The grain welcomes more eyes. See an issue? Open a PR.

```bash
git clone https://github.com/alperenugurlu/mirror-history.git
cd mirror-history
npm install
npm run dev
```

---

## License

MIT &mdash; Do whatever you want. The grain doesn't restrict. It only watches.

---

<div align="center">

### Built by

<a href="https://github.com/alperenugurlu">
  <img src="https://github.com/alperenugurlu.png" width="80" height="80" style="border-radius: 50%;" alt="Alperen Ugurlu" />
</a>

**[Alperen Ugurlu](https://github.com/alperenugurlu)**

[![GitHub followers](https://img.shields.io/github/followers/alperenugurlu?label=Follow&style=social)](https://github.com/alperenugurlu)
[![GitHub stars](https://img.shields.io/github/stars/alperenugurlu/mirror-history?style=social)](https://github.com/alperenugurlu/mirror-history)

*Security researcher. Builder. The one who built the grain.*

---

```
The grain doesn't judge.
It just remembers.

And it never lies.
```

**[Star this repo](https://github.com/alperenugurlu/mirror-history)** if the grain should exist.

*Built with obsessive attention to detail and a healthy fear of surveillance capitalism.*

</div>
